/*! 16-11-2017 */
"use strict";var _currentLocation={apiKey:"",createPromise:function(){var _this=this,promise=new Promise(function(resolve,reject){window.currentLocationSuccess=function(latitude,longitude){_this.requestAddressToGoogle(latitude,longitude).done(function(googleAddress){resolve(googleAddress)}).fail(function(err){reject(err)})},window.currentLocationError=function(err){reject(err)}});return promise},requestAddressToGoogle:function(latitude,longitude){return $.ajax({type:"POST",url:"https://maps.googleapis.com/maps/api/geocode/json?key="+this.apiKey+"&latlng="+latitude+","+longitude+"&sensor=false"})},androidGetCurrentLocation:function(apiKey){this.apiKey=apiKey;var promise=this.createPromise();return GEOLocationInterface.getCurrentLocation(),promise},iOSGetCurrentLocation:function(apiKey){this.apiKey=apiKey;var promise=this.createPromise();return window.location="geolocationinterface://getcurrentlocation",promise}},_loginFacebook={createPromise:function(){var promise=new Promise(function(resolve,reject){window.loginFacebookSuccess=function(user,token){user.accessToken=token,resolve(user)},window.loginFacebookError=function(err){reject(err)},window.loginFacebookCancel=function(){reject()}});return promise},androidOpenFacebook:function(){var promise=this.createPromise();return FacebookInterface.startFacebook(),promise},iOSOpenFacebook:function(){var promise=this.createPromise();return window.location="facebookinterface://facebooklogin",promise}},_navigationApps={apiKey:"",createPromise:function(){var promise=new Promise(function(resolve,reject){window.navigationAppsSuccess=function(){resolve()},window.navigationAppsError=function(err){reject(err)}});return promise},requestAddressToGoogle:function(address){return $.ajax({type:"POST",url:"https://maps.googleapis.com/maps/api/geocode/json?key="+this.apiKey+"&address="+address+"&sensor=false"})},androidOpenNavigationApps:function(address,apiKey){this.apiKey=apiKey;var promise=this.createPromise();return this.requestAddressToGoogle(address).done(function(googleAddress){var latitude=googleAddress.results[0].geometry.location.lat,longitude=googleAddress.results[0].geometry.location.lng;GEOLocationInterface.openNavigationApps(latitude,longitude,address)}).fail(function(err){window.navigationAppsError(err)}),promise},iOSOpenNavigationApps:function(address,apiKey){this.apiKey=apiKey;var promise=this.createPromise();return this.requestAddressToGoogle(address).done(function(googleAddress){var latitude=googleAddress.results[0].geometry.location.lat,longitude=googleAddress.results[0].geometry.location.lng;window.location="geolocationinterface://opennavigationapps?coordenates="+latitude+","+longitude+","+address+";"}).fail(function(err){window.navigationAppsError(err)}),promise}},redePoynt={createPromiseDoPayment:function(){var promise=new Promise(function(resolve,reject){window.doPaymentRedePoyntSuccess=function(success){resolve(success)},window.doPaymentRedePoyntError=function(err){reject(err)}});return promise},androidDoPaymentRedePoynt:function(value,transactionId,type){var promise=this.createPromiseDoPayment();return RedePoyntInterface.doPayment(value,transactionId,type),promise},createPromiseOnReprint:function(){var promise=new Promise(function(resolve,reject){window.onReprintRedePoyntSuccess=function(success){resolve(success)},window.onReprintRedePoyntError=function(err){reject(err)}});return promise},androidOnReprintRedePoynt:function(){var promise=this.createPromiseOnReprint();return RedePoyntInterface.onReprint(),promise},createPromiseOnReversal:function(){var promise=new Promise(function(resolve,reject){window.onReversalRedePoyntSuccess=function(success){resolve(success)},window.onReversalRedePoyntError=function(err){reject(err)}});return promise},androidOnReversalRedePoynt:function(){var promise=this.createPromiseOnReversal();return RedePoyntInterface.onReversal(),promise},androidHideAppRedePoynt:function(){return RedePoyntInterface.hideApp(),new Promise(function(resolve,reject){resolve()})},createPromisePrint:function(){var promise=new Promise(function(resolve,reject){window.printRedePoyntSuccess=function(success){resolve(success)},window.printRedePoyntError=function(err){reject(err)}});return promise},androidPrintRedePoynt:function(content,qrCode,footer){var promise=this.createPromisePrint();return RedePoyntPrinterJSInterface.printWithPoynt(content,qrCode,footer),promise}},_scanCreditCard={createPromise:function(){var promise=new Promise(function(resolve,reject){window.scanCreditCardSuccess=function(cardNumber,cardHolderName,cardCVV,cardExpiryMonth,cardExpiryYear){var creditCard={number:cardNumber,holderName:cardHolderName,cvv:cardCVV,month:cardExpiryMonth,year:cardExpiryYear};resolve(creditCard)},window.scanCreditCardError=function(err){reject(err)},window.scanCreditCardCancel=function(){reject()}});return promise},androidOpenScanCreditCard:function(){var promise=this.createPromise();return ScanCreditCardInterface.getCreditCard(),promise},iOSOpenScanCreditCard:function(){var promise=this.createPromise();return window.location="scancreditcardinterface://getcreditcard",promise}},_scanQRCode={createPromise:function(){var promise=new Promise(function(resolve,reject){window.scanQRCodeSuccess=function(qrcode){resolve(qrcode)},window.scanQRCodeError=function(err){reject(err)},window.scanQRCodeCancel=function(){reject()}});return promise},androidOpenScanQRCode:function(){var promise=this.createPromise();return ScanQRCodeInterface.scanQRCode(),promise},iOSOpenScanQRCode:function(){var promise=this.createPromise();return window.location="scanqrcodeinterface://scanqrcode",promise}},_uploadImage={createPromise:function(){var promise=new Promise(function(resolve,reject){window.imageSuccess=function(type,base64,size){var img={name:"image."+type,type:"image/"+type,size:size,b64File:"data:image/"+type+";base64,"+base64};resolve(img)},window.imageError=function(err){reject(err)},window.imageCancel=function(){reject()}});return promise},androidOpenGallery:function(){var promise=this.createPromise();return UploadImageInterface.getImageFromGallery(),promise},iOSOpenGallery:function(){var promise=this.createPromise();return window.location="uploadimageinterface://upload",promise}},webViewInterface={ANDROID:"ANDROID",IOS:"iOS",UNEXPECTED:"UNEXPECTED OPERATION SYSTEM",getOS:function(){var userAgent=navigator.userAgent||navigator.vendor||window.opera;return/android/i.test(userAgent)?this.ANDROID:/iPad|iPhone|iPod/.test(userAgent)&&!window.MSStream?this.IOS:this.UNEXPECTED},unexpectedOperationSystem:function(){var _this2=this;return new Promise(function(resolve,reject){reject(_this2.UNEXPECTED)})},uploadImage:function(){return this.getOS()==this.ANDROID?_uploadImage.androidOpenGallery():this.getOS()==this.IOS?_uploadImage.iOSOpenGallery():this.unexpectedOperationSystem()},loginFacebook:function(){return this.getOS()==this.ANDROID?_loginFacebook.androidOpenFacebook():this.getOS()==this.IOS?_loginFacebook.iOSOpenFacebook():this.unexpectedOperationSystem()},scanCreditCard:function(){return this.getOS()==this.ANDROID?_scanCreditCard.androidOpenScanCreditCard():this.getOS()==this.IOS?_scanCreditCard.iOSOpenScanCreditCard():this.unexpectedOperationSystem()},scanQRCode:function(){return this.getOS()==this.ANDROID?_scanQRCode.androidOpenScanQRCode():this.getOS()==this.IOS?_scanQRCode.iOSOpenScanQRCode():this.unexpectedOperationSystem()},navigationApps:function(address,addressName){return this.getOS()==this.ANDROID?_navigationApps.androidOpenNavigationApps(address,addressName):this.getOS()==this.IOS?_navigationApps.iOSOpenNavigationApps(address,addressName):this.unexpectedOperationSystem()},currentLocation:function(address){return this.getOS()==this.ANDROID?_currentLocation.androidGetCurrentLocation(address):this.getOS()==this.IOS?_currentLocation.iOSGetCurrentLocation(address):this.unexpectedOperationSystem()},redePoyntDoPayment:function(value,transactionId,type){return this.getOS()==this.ANDROID?redePoynt.androidDoPaymentRedePoynt(value,transactionId,type):this.unexpectedOperationSystem()},redePoyntOnReprint:function(){return this.getOS()==this.ANDROID?redePoynt.androidOnReprintRedePoynt():this.unexpectedOperationSystem()},redePoyntOnReversal:function(){return this.getOS()==this.ANDROID?redePoynt.androidOnReversalRedePoynt():this.unexpectedOperationSystem()},redePoyntHideApp:function(){return this.getOS()==this.ANDROID?redePoynt.androidHideAppRedePoynt():this.unexpectedOperationSystem()},redePoyntPrint:function(content,qrCode,footer){return this.getOS()==this.ANDROID?redePoynt.androidPrintRedePoynt(content,qrCode,footer):this.unexpectedOperationSystem()}};